id: rel02.1-uc001-issue-tracking-cli
title: Issue-Tracking CLI
summary: 'A user or agent runs the seven issue-tracking commands (create, ready,

  update, close, show, list, comments) against a fresh cupboard and verifies

  correct output in both human-readable and JSON formats.

  '
actor: Developer or coding agent using the cupboard CLI for task tracking
trigger: Invoking any of the issue-tracking commands from the terminal
flow:
- id: F1
  step: 'Initialize cupboard: create config.yaml with SQLite backend and data_dir,
    set CUPBOARD_CONFIG'
- id: F2
  step: 'Create task with required fields: run cupboard create --type task --title
    --description'
- id: F3
  step: 'Create task with JSON output: run cupboard create with --json flag to capture
    the ID'
- id: F4
  step: 'Create epic with labels: run cupboard create --type epic --labels to set
    categorical and list properties'
- id: F5
  step: 'List all crumbs: run cupboard list --json to retrieve all crumbs via Table.Fetch(nil)'
- id: F6
  step: 'Show specific crumb: run cupboard show <id> to display details via Table.Get'
- id: F7
  step: 'Find available work: run cupboard ready --json --type task to fetch open
    tasks'
- id: F8
  step: 'Claim task: run cupboard update <id> --status in_progress to transition state'
- id: F9
  step: 'Verify status change: run cupboard show <id> to confirm state is in_progress'
- id: F10
  step: 'Add comment: run cupboard comments add <id> ''text'' to append metadata'
- id: F11
  step: 'Verify comment: run cupboard show <id> to confirm comment appears in output'
- id: F12
  step: 'Close task: run cupboard close <id> to set state to closed'
- id: F13
  step: 'Verify final state: run cupboard show <id> to confirm state is closed'
- id: F14
  step: 'Confirm ready excludes closed: run cupboard ready --json --type task and
    verify closed task is absent'
touchpoints:
- T1: 'Cupboard interface: GetTable(''crumbs'') (prd001-cupboard-core R2)'
- T2: 'Table interface: Get, Set, Fetch (prd001-cupboard-core R3)'
- T3: 'cupboard CLI create command: creation via Table.Set (prd003-crumbs-interface
    R3)'
- T4: 'cupboard CLI ready command: Fetch with filter (prd003-crumbs-interface R9,
    R10)'
- T5: 'cupboard CLI update command: SetState (prd003-crumbs-interface R4)'
- T6: 'cupboard CLI close command: Pebble (prd003-crumbs-interface R4.3)'
- T7: 'cupboard CLI show command: Table.Get (prd001-cupboard-core R3.2)'
- T8: 'cupboard CLI list command: Table.Fetch (prd003-crumbs-interface R10)'
- T9: 'cupboard CLI comments add command: metadata (prd002-sqlite-backend R2.8)'
- T10: 'Crumb entity: state transitions, properties (prd003-crumbs-interface R2, R4,
    R5)'
- T11: 'Properties: type, priority, labels (prd004-properties-interface R9)'
- T12: 'SQLite backend: JSONL persistence (prd002-sqlite-backend R5)'
success_criteria:
- id: S1
  criterion: cupboard create --type task --title 'Demo' --description 'Test' --json
    outputs JSON with crumb_id, state open, type task
- id: S2
  criterion: cupboard list --json returns JSON array containing the created task
- id: S3
  criterion: cupboard show <id> displays title, state, type, and description in human-readable
    format
- id: S4
  criterion: cupboard ready --json --type task returns JSON array including open tasks
- id: S5
  criterion: cupboard update <id> --status in_progress exits with code 0 and confirmation
    message
- id: S6
  criterion: cupboard ready --json --type task excludes tasks no longer in open state
- id: S7
  criterion: cupboard comments add <id> 'text' exits with code 0 and confirmation
    message
- id: S8
  criterion: cupboard show <id> includes comment text in output
- id: S9
  criterion: cupboard close <id> exits with code 0 and confirmation message
- id: S10
  criterion: cupboard show <id> shows state as closed after close command
out_of_scope:
- Script integration (do-work.sh, make-work.sh) covered by rel02.1-uc003-self-hosting
  Phase 2
- Interactive agent workflow rules covered by rel02.1-uc003-self-hosting Phase 3
- Trail operations (create, complete, abandon)
- Multi-user or concurrent access patterns
- Remote backends
test_suite: test-rel02.1
