id: test-rel99.0
title: Unscheduled
release: '99.0'
traces:
- rel99.0-uc001-blazes-templates
- rel99.0-uc002-docker-bootstrap
preconditions: |-
  Template directory exists at .crumbs/blazes/ or configured path
  At least one valid template YAML file in the directory
  YAML parsing capability available
  Agent has access to task context for semantic matching
  Docker installed and running on host
  Claude API access available (ANTHROPIC_API_KEY set)
  docs/ directory contains VISION.md, ARCHITECTURE.md, road-map.yaml, PRDs, use cases
  No crumbs source code in container (only docs/ mounted)
test_cases:
- name: Discover template directory at well-known path
  inputs:
    args:
    - 'Locate template directory at well-known path .crumbs/blazes/ '
    env:
    - template_dir=.crumbs/blazes/
  expected:
    exit_code: 0
- name: Discover template directory at configured path
  inputs:
    args:
    - 'Read template directory from configuration Locate directory at configured path '
    env:
    - template_dir=/custom/templates/blazes/
  expected:
    exit_code: 0
- name: Handle missing template directory gracefully
  inputs:
    args:
    - 'Attempt to locate template directory '
    env:
    - template_dir=/nonexistent/blazes/
  expected: {}
- name: List all YAML files in template directory
  inputs:
    args:
    - 'List all .yaml and .yml files in .crumbs/blazes/ '
  expected:
    exit_code: 0
- name: Handle empty template directory
  inputs:
    args:
    - 'List all .yaml and .yml files in empty directory '
  expected:
    exit_code: 0
- name: Parse template metadata successfully
  inputs:
    args:
    - 'Parse .crumbs/blazes/bug-fix.yaml and extract metadata '
  expected:
    exit_code: 0
- name: Parse template with minimal metadata
  inputs:
    args:
    - 'Parse .crumbs/blazes/simple.yaml and extract metadata '
  expected:
    exit_code: 0
- name: Skip malformed template with warning
  inputs:
    args:
    - 'Parse all templates in directory '
  expected: {}
- name: Match task to template tags (exact match)
  inputs:
    args:
    - 'Match task description to template tags '
  expected: {}
- name: Match task to template tags (semantic match)
  inputs:
    args:
    - 'Match task description to template tags using semantic similarity '
  expected: {}
- name: No match when no templates have relevant tags
  inputs:
    args:
    - 'Attempt to match task to template tags '
  expected: {}
- name: Select single matching template
  inputs:
    args:
    - 'Match and select best template '
  expected: {}
- name: Select most specific template when multiple match
  inputs:
    args:
    - 'Match task and select most specific template '
  expected: {}
- name: Prompt user when multiple templates match equally
  inputs:
    args:
    - 'Match and select when multiple equally match '
  expected: {}
- name: Extract parameter definitions with all fields
  inputs:
    args:
    - 'Extract parameter definitions from template '
  expected: {}
- name: Extract parameters with defaults
  inputs:
    args:
    - 'Extract parameters and identify defaults '
  expected: {}
- name: Identify parameters that can be inferred from context
  inputs:
    args:
    - 'Extract parameters and identify which can be inferred '
  expected: {}
- name: Present template selection to user
  inputs:
    args:
    - 'Select template and present to user for confirmation '
  expected:
    stdout: reproduction_steps
- name: Present template with inferred parameters
  inputs:
    args:
    - 'Present template with inferred values highlighted '
  expected:
    stdout: 'affected_files: [src/parser.go] (inferred)'
- name: Present template with missing required parameters
  inputs:
    args:
    - 'Present template indicating required parameters '
  expected:
    stdout: version (required)
- name: Handle template directory permission denied
  inputs:
    args:
    - 'Attempt to read protected template directory '
    env:
    - template_dir=/root/protected/blazes/
  expected: {}
- name: Start container with only docs mounted
  inputs:
    args:
    - |
      docker run -it \
        -v $(pwd)/docs:/workspace/docs:ro \
        -e ANTHROPIC_API_KEY=$ANTHROPIC_API_KEY \
        crumbs-bootstrap
  expected:
    exit_code: 0
- name: Verify no source code in container
  inputs:
    args:
    - 'ls /workspace/ ls /workspace/pkg 2>&1 || echo "no pkg" ls /workspace/internal
      2>&1 || echo "no internal" ls /workspace/cmd 2>&1 || echo "no cmd" '
  expected:
    stdout: no cmd
- name: Verify Go toolchain available
  inputs:
    args:
    - go version
  expected:
    exit_code: 0
    stdout: go version
- name: Verify Claude available
  inputs:
    args:
    - claude --version || claude-code --version
  expected:
    exit_code: 0
- name: Read VISION.md
  inputs:
    args:
    - cat /workspace/docs/VISION.md
  expected:
    exit_code: 0
    stdout: crumbs
- name: Read ARCHITECTURE.md
  inputs:
    args:
    - cat /workspace/docs/ARCHITECTURE.md
  expected:
    exit_code: 0
    stdout: Cupboard
- name: Read road-map.yaml
  inputs:
    args:
    - cat /workspace/docs/road-map.yaml
  expected:
    exit_code: 0
    stdout: releases
- name: Read all PRDs in product-requirements
  inputs:
    args:
    - ls /workspace/docs/specs/product-requirements/prd*.yaml | wc -l
  expected:
    exit_code: 0
- name: Create pkg/types directory structure
  inputs:
    args:
    - 'mkdir -p /workspace/pkg/types mkdir -p /workspace/internal/sqlite mkdir -p
      /workspace/cmd/crumbs '
  expected:
    exit_code: 0
- name: Implement Cupboard interface per prd001-cupboard-core
  inputs:
    args:
    - 'Agent implements pkg/types/cupboard.go with: - Cupboard interface (Attach,
      Detach, GetTable) - Table interface (Get, Set, Delete, Fetch) - Config struct
      (Backend, DataDir) '
  expected: {}
- name: Attach initializes storage
  inputs:
    args:
    - 'config := Config{Backend: "sqlite", DataDir: "/tmp/test-crumbs"} cupboard.Attach(config) '
  expected:
    exit_code: 0
- name: Detach cleans up resources
  inputs:
    args:
    - cupboard.Detach()
  expected:
    exit_code: 0
- name: Table.Set creates entity
  inputs:
    args:
    - 'crumbsTable := cupboard.GetTable("crumbs") id, err := crumbsTable.Set("", &Crumb{Name:
      "Test", State: "draft"}) '
  expected:
    exit_code: 0
- name: Table.Get retrieves entity
  inputs:
    args:
    - 'entity, err := crumbsTable.Get(crumb_id) '
  expected:
    exit_code: 0
- name: Table.Delete removes entity
  inputs:
    args:
    - crumbsTable.Delete(crumb_id)
  expected:
    exit_code: 0
- name: Table.Fetch queries entities
  inputs:
    args:
    - 'filter := map[string]any{"state": "draft"} entities, err := crumbsTable.Fetch(filter) '
  expected:
    exit_code: 0
- name: Crumb state transitions work
  inputs: {}
  expected: {}
- name: Crumb property methods work
  inputs: {}
  expected: {}
- name: JSONL files created on write
  inputs:
    args:
    - ls /tmp/test-crumbs/*.jsonl
  expected:
    exit_code: 0
    stdout: crumbs.jsonl
- name: Data loads from JSONL on startup
  inputs: {}
  expected: {}
- name: Run release 01.0 tests
  inputs:
    args:
    - go test ./... -v
  expected:
    exit_code: 0
    stdout: PASS
- name: Verify rel01.0-uc001 success criteria
  description: Cupboard lifecycle use case validation
  inputs: {}
  expected: {}
- name: Verify rel01.0-uc002 success criteria
  description: SQLite CRUD use case validation
  inputs: {}
  expected: {}
- name: Build crumbs CLI
  inputs:
    args:
    - go build -o crumbs ./cmd/crumbs
  expected:
    exit_code: 0
- name: Initialize crumbs data directory
  inputs:
    args:
    - ./crumbs init --datadir /tmp/crumbs-data
  expected:
    exit_code: 0
- name: Create work item via CLI
  inputs:
    args:
    - './crumbs create --type task --name "Implement release 02.0" --state draft '
  expected:
    exit_code: 0
    stdout: Created
- name: Import release 02.0 work items
  inputs: {}
  expected: {}
- name: List pending work items
  inputs:
    args:
    - ./crumbs list --state draft
  expected:
    exit_code: 0
- name: Update work item status
  inputs:
    args:
    - ./crumbs update ${item_id} --state ready
  expected:
    exit_code: 0
- name: Verify Cupboard interface matches prd001-cupboard-core
  inputs:
    args:
    - 'Inspect pkg/types/cupboard.go Verify Attach, Detach, GetTable methods present
      Verify Table interface has Get, Set, Delete, Fetch '
  expected: {}
- name: Verify Crumb struct matches prd003-crumbs-interface
  inputs:
    args:
    - 'Inspect pkg/types/crumb.go Verify all fields from prd003-crumbs-interface R1 '
  expected: {}
- name: Verify SQLite backend matches prd002-sqlite-backend
  inputs:
    args:
    - 'Inspect internal/sqlite/*.go Verify JSONL format, directory layout, startup
      loading '
  expected: {}
- name: Handle missing ANTHROPIC_API_KEY
  inputs:
    args:
    - Attempt to run Claude agent
    env:
    - ANTHROPIC_API_KEY=
  expected:
    exit_code: 1
    stderr_contains: API key
- name: Handle documentation gaps
  description: Agent should file issues for missing specs
  inputs:
    args:
    - Agent attempts to implement based on incomplete docs
  expected: {}
- name: End-to-end bootstrap workflow
  description: 'Complete bootstrap from empty container to self-hosting crumbs. Validates
    the entire flow from documentation to working system. '
  inputs: {}
  expected: {}
